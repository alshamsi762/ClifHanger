<html>
	<head>
		<title>My first three.js app</title>
		<style>
			body { margin: 0; }
			canvas { width: 100%; height: 100% }
		</style>
	</head>
	<body>
		<script src="js/three.js"></script>
    <script src="js/OrbitControls.js"></script>
		<script>
      var gravity = -9.81;
      var delta = 0.0;
      var mass = 12;
      var velocity;
      var moment =0;
			var scene = new THREE.Scene();
      var clock = new THREE.Clock();
			var camera = new THREE.PerspectiveCamera( 150, window.innerWidth/window.innerHeight, 0.1, 1000 );

			var renderer = new THREE.WebGLRenderer();
			renderer.setSize( window.innerWidth, window.innerHeight );
			document.body.appendChild( renderer.domElement );
      controls = new THREE.OrbitControls( camera, renderer.domElement );
      var geometry = new THREE.PlaneGeometry( 1, 1, 32 );
      var material = new THREE.MeshBasicMaterial( {color: 0xffff00, side: THREE.DoubleSide} );
      var plane = new THREE.Mesh( geometry, material );
      scene.add( plane );
      var plane2 = new THREE.Mesh( geometry, material );
      scene.add( plane2 );
      geometry = new THREE.SphereGeometry( 0.2, 32, 32 );
      material = new THREE.MeshBasicMaterial( {color: 0xffff00} );
      var sphere = new THREE.Mesh( geometry, material );
      scene.add( sphere );
      plane2.position.x = 2;
			camera.position.z = 5;
      sphere.position.z = 5;
      sphere.position.x = 2;


      function fall(object) {
        if (object.position.z < -99) {
          object.visible = false;
        }
        else if(object.position.z > -100){

          console.log(clock.getElapsedTime());
          object.position.z = 1/2 * gravity * (clock.getElapsedTime()*clock.getElapsedTime()) + object.position.z;
        }
      }
      function bounce(object) {
        if(object.position.z <(3/2)*0.2 ){
          if(Math.abs(moment) < 0.5)
            return;
        }
        moment = moment + mass * gravity * 0.01;
        if (object.position.z < 0.2) {
          moment = -(0.8)*moment;
          //clock.start;
        }

          //console.log(clock.getElapsedTime());
          console.log(moment);
          object.position.z = object.position.z + (moment/mass)*0.01;


      }

			var animate = function () {
        clock.start();
				requestAnimationFrame( animate );
        //document.write(plane.pos.x);

        fall(plane);
        bounce(sphere);

				//plane.rotation.y += 0.1;

				renderer.render(scene, camera);
			};

			animate();
		</script>
	</body>
</html>
